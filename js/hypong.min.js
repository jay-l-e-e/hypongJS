/* hypong.js, @license MIT, (c) 2017 Jay Lee. */
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.defineProperty="function"==typeof Object.defineProperties?Object.defineProperty:function(c,f,g){c!=Array.prototype&&c!=Object.prototype&&(c[f]=g.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var c=$jscomp.global.Symbol.iterator;c||(c=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[c]&&$jscomp.defineProperty(Array.prototype,c,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(c){var f=0;return $jscomp.iteratorPrototype(function(){return f<c.length?{done:!1,value:c[f++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(c){$jscomp.initSymbolIterator();c={next:c};c[$jscomp.global.Symbol.iterator]=function(){return this};return c};$jscomp.makeIterator=function(c){$jscomp.initSymbolIterator();var f=c[Symbol.iterator];return f?f.call(c):$jscomp.arrayIterator(c)};$jscomp.arrayFromIterator=function(c){for(var f,g=[];!(f=c.next()).done;)g.push(f.value);return g};$jscomp.arrayFromIterable=function(c){return c instanceof Array?c:$jscomp.arrayFromIterator($jscomp.makeIterator(c))};
!function(c){var f=[],g={},v={width:450,height:250,speed:50,racketHeight:35,racketWidth:5,racketMargin:10,ballSize:4,ballX:225,homeX:45,awayX:405,ballY:125,homeY:125,awayY:125,homeScore:0,awayScore:0,background:"black",racketColor:"white",ballColor:"white",fps:62.5,isRunning:!1},p=function(a,b){this["_"+a]=b;return this.render()},m=function(a,b){this["_"+a]=b;this.isRunning&&this.stop().run()},n=[["width",p],["height",p],["ballSize",p],["racketWidth",p],["racketHeight",p],["racketMargin",p],["homeY",
function(a,b){if(this.isRunning){var d=this.racketHeight/2,c=this.height,e=b;0>=b-d?e=0+d:b+d>=c&&(e=c-d);this["_"+a]=e}return this.drawHomeRacket()}],["awayY",function(a,b){if(this.isRunning){var d=this.racketHeight/2,c=this.height,e=b;0>=b-d?e=0+d:b+d>=c&&(e=c-d);this["_"+a]=e}return this.drawAwayRacket()}],["background",function(a,b){this["_"+a]=b;this.drawStage()}],["racketColor",function(a,b){this["_"+a]=b;this.spawnHomeRacket().spawnAwayRacket()}],["ballColor",function(a,b){this["_"+a]=b;this.spawnBall()}],
["fps",m],["onStart",m],["onStop",m],["onCollision",m],["onFrameStart",m],["onFrameEnd",m]],k=function(a,b){return new k.fn.init(a,b)};k.fn=k.prototype={constructor:k,hypong:"1.0.0",filter:f.filter,splice:f.splice,push:f.push,sort:f.sort,map:f.map,length:0,frames:0,distinctMap:g};k.extend=k.fn.extend=function(){var a,b=this,d=arguments[0];1<arguments.length&&(b=arguments[1]);for(a in d)b[a]=d[a];return b};(k.fn.init=function(a,b){this.homeRacket=c.document.createElement("div");this.awayRacket=c.document.createElement("div");
this.ball=c.document.createElement("div");this.ball.className=this.awayRacket.className=this.homeRacket.className="hypong-props";if(a){var d;(d=a.nodeType?a:c.document.getElementById(a.replace(String.fromCharCode(35),"")))?(this[0]=d,this.length=1):this.length=0}return this.initialize(b)}).prototype=k.fn;k.fn.extend({initialize:function(a){var b=this[0];if(!b)return this;var d={},c;for(c in n)d.prop=c,Object.defineProperty(this,n[d.prop][0],{configurable:!0,get:function(a){return function(){return this["_"+
n[a.prop][0]]}}(d),set:n[d.prop][1].bind(this,n[d.prop][0])}),d={prop:d.prop};for(var e in v)this[e]=v[e];for(var f in a)-1!=="width|height|speed|racketHeight|racketWidth|racketMargin|ballSize|fps|ballColor|racketColor|background|onStart|onStop|onFrameEnd|onFrameStart|onCollision|homeY|awayY|homeScore|awayScore|ballX|ballY".indexOf(f)&&(this[f]=a[f]);g[this[0].id]&&clearInterval(g[this[0].id]);this.removeElementsByClassName("hypong-props");b.appendChild(this.ball);b.appendChild(this.homeRacket);b.appendChild(this.awayRacket);
return this.render()},render:function(){return this.revisionProps().drawStage().spawnBall().spawnHomeRacket().spawnAwayRacket()},revisionProps:function(){var a=this[0],b=this.height/2,d=this.width,c=this.racketMargin,e=1===parseInt(2*Math.random())?-1:1;this.ballVector={x:5*e,y:.25*e};this.ballX=d/2;this.ballY=b;this.homeX=d/100*c;this.homeY=b;this.awayX=d-d/100*c;this.awayY=b;a&&g[a.id]&&!0===this.isRunning&&(clearInterval(g[this[0].id]),this.run());return this},drawStage:function(){var a=this[0];
if(a){var a=a.style,b=this.height,d=this.width;a.background=this.background;a.position="relative";a.width=d+"px";a.height=b+"px"}return this},spawnBall:function(){var a=this.ball.style,b=this.ballX,d=this.ballY,c=this.ballColor;a.width=2*this.ballSize+"px";a.height=2*this.ballSize+"px";a.bottom=d-this.ballSize+"px";a.left=b-this.ballSize+"px";a.borderRadius=this.ballSize+"px";a.position="absolute";a.background=c;a.display="block";return this},spawnHomeRacket:function(){var a=this.homeRacket.style,
b=this.racketWidth,d=this.racketHeight,c=this.racketMargin,e=this.racketColor;this._homeY=this.height/2;a.width=b+"px";a.height=d+"px";a.bottom=this.homeY-d/2+"px";a.left=c+"%";a.borderRadius="3px";a.position="absolute";a.background=e;return this},spawnAwayRacket:function(){var a=this.awayRacket.style,b=this.racketWidth,d=this.racketHeight,c=this.racketMargin,e=this.racketColor;this._awayY=this.height/2;a.width=b+"px";a.height=d+"px";a.bottom=this.awayY-d/2+"px";a.right=c+"%";a.borderRadius="3px";
a.position="absolute";a.background=e;return this},drawBall:function(){var a=this.ball.style,b=this.ballX;a.bottom=this.ballY-this.ballSize+"px";a.left=b-this.ballSize+"px";a.display="block";return this},hideBall:function(){this.ball.style.display="none";return this},resetBall:function(a){var b=this,d=this.height/2;this.ballX=this.width/2+a;this.ballY=d;this.stop(!0);setTimeout(function(){b.isRunning&&b.drawBall().run()},1E3);return this},drawHomeRacket:function(){this.homeRacket.style.bottom=this.homeY-
this.racketHeight/2+"px";return this},drawAwayRacket:function(){this.awayRacket.style.bottom=this.awayY-this.racketHeight/2+"px";return this},moveRacket:function(a,b){this[a+"Y"]+=b;return this},moveBall:function(){var a=this.getExpectedMove.bind(this),b=this.ballVector.y,d=this.ballX,c=this.ballY,e=this.ballSize,f=this.width,g=this.height,l=a(this.ballVector.x),a=a(b);0>=d+l-e?l-=l+d-e:d+l+e>=f&&(l-=-f+(d+l+e));0>=c+a-e?a-=a+c-e:c+a+e>=g&&(a-=-g+(c+a+e));this.ballX+=l;this.ballY+=a;return this},
getExpectedMove:function(a){return this.speed/100*a},getCollisionInfo:function(a,b,c,f,e,g,k,l){var d={LRDirection:null,TBScore:null};a>=e&&(d.LRDirection="left");a<=e&&(d.LRDirection="right");d.TBScore=(g-b)/c;b-c<g+k&&b+c>g-k&&a-f<e+l&&a+f>e-l&&(d.isCollision=!0);return d},ballWillPassThrough:function(a,b,c,f,e,g,k,l,p){k=this.getExpectedMove.bind(this);return(a>=f+k(g)&&a<f||a<=f+k(g)&&a>f)&&b-c<e+l&&b+c>e-l},yAffectedByX:function(a,b){return Math.abs(a)*(b+(0<b?1/3:-1/3))},stop:function(a){var b=
this[0];if(!b||!this.isRunning)return this;var c=this.onStop;g[b.id]&&clearInterval(g[b.id]);a||(this.isRunning=!1);this.fireEvent(c,[a,this.captureState()]);return this},captureState:function(){return{ballX:this.ballX,ballY:this.ballY,homeX:this.homeX,homeY:this.homeY,awayX:this.awayX,awayY:this.awayY,frames:this.frames,homeScore:this.homeScore,awayScore:this.awayScore,ballVector:{x:this.ballVector.x,y:this.ballVector.y}}},fireEvent:function(a,b){a&&"function"===typeof a&&("object"===typeof b&&b.length?
a.apply(null,[].concat($jscomp.arrayFromIterable(b))):a(b));return this},run:function(a){var b=this,c=this[0];if(!c)return this;g[c.id]&&clearInterval(g[c.id]);a&&"object"===typeof a&&this.extend(a);var f=this.height,e=this.width,k=this.racketHeight,p=this.racketWidth,l=this.homeX,m=this.awayX,h=this.ballSize,n=this.getCollisionInfo.bind(this),v=this.ballWillPassThrough.bind(this),A=this.yAffectedByX.bind(this),B=this.getExpectedMove.bind(this),D=this.moveBall.bind(this),u=this.captureState.bind(this),
t=this.fireEvent.bind(this),E=this.onFrameStart,C=this.onFrameEnd,x=this.onCollision;a=this.onStart;this.isRunning=!0;t(a,this.captureState());this.runningId=setInterval(function(){b.frames++;t(E,b.captureState());var a=b.ballX,c=b.ballY,d=b.ballVector.x,g=b.ballVector.y;if(0>=c-h||0>=a-h||c+h>=f||a+h>=e){if(0>=c-h||c+h>=f){var w=d;var q=-g;0>=c-h?t(x,[u(),{LRDirection:null,TBScore:0}]):t(x,[u(),{LRDirection:null,TBScore:1}])}if(0>=a-h||a+h>=e){t(C,u());if(0>=a-h)return b.awayScore++,b.resetBall(50).hideBall();
b.homeScore++;return b.resetBall(-50).hideBall()}b.ballVector.x=w;b.ballVector.y=q}else{var r=b.homeY;w=b.awayY;q=k/2;var y=p/2,z=n(l-B(d),r,q,y,a,c,h,h);if(z.isCollision||v(l,r,q,a,c,d,g,h,h))z.LRDirection=n(l,r,q,y,a,c,h,h).LRDirection,t(x,[u(),z]),b.ballVector.x=-d,b.ballVector.y=A(d,z.TBScore);r=n(m-B(d),w,q,y,a,c,h,h);if(r.isCollision||v(m,w,q,a,c,d,g,h,h))r.LRDirection=n(m,w,q,y,a,c,h,h).LRDirection,t(x,[u(),r]),b.ballVector.x=-d,b.ballVector.y=A(d,r.TBScore)}D().drawBall().fireEvent(C,u())},
1E3/this.fps);g[c.id]=this.runningId;return this},removeElementsByClassName:function(a){for(a=this[0].getElementsByClassName(a);0<a.length;)this[0].removeChild(a[0])}});c.hypong=k}(window);
